<ion-content>
  <header class="mainHeader">
    <div class="back-buttons"> 
      <button class="goback" (click)="goBack()">&#8249;</button> <!-- Custom back button -->
    </div>
    <div class="logo-container">
        <img class="logoimg" src="assets/images/blogo.png" width="50" height="50" />
    </div>
    <div class="placeholderHeader">
      <div class="settingButtons">
        <button routerLink="/setkb" id="settingsKB" #settingsKB class="audioSet" type="button"><img src="assets/images/settings.png"></button>
      </div>  
      <div class="questionMark questionClass">
        <button #questionKB type="button"><img class="questionIMG" src="assets/images/question.png"></button>
      </div>
    </div>
  </header>   
  <div id="kbPage">
    <div class="breathingpages">
        <div class="breathingpages">
            <h1 class="volumeSettings">Kapalabhati</h1>
        </div>
        <div class="main-container">
          <div class="timer-status">
              <div class="settings-form KB">
                  <div class="form-line">
                      <img src="assets/images/breaths.png">
                      <input value="30" #breathsInputKB min="1" readonly>
                  </div>
                  <div class="form-line">
                      <img src="assets/images/hold.png">
                      <input value="∞" #hold1InputKB min="1" readonly>
                  </div>
                  <div class="form-line">
                    <img src="assets/images/nor.png">
                    <input type="number" value="30" #hold2InputKB min="1" readonly>
                </div>
              </div>
              <div class="KBtimer-container">
                  <select #KBtimeInput class="countdownDisplay">
                      <option value="infinity"> ∞ </option>
                      <option value="1">1 Round</option>
                  </select>
                  <input #KBcountdownInput class="countdownDisplay" style="display: none;" readonly />
              </div>
               <div *ngIf="showFixedRoundButton" class="fixed-round-button">
                <button *ngIf="!isPortuguese" class="english" type="button" (click)="openFixedRoundsModal()">
                  Set holding times
                </button>
                <button *ngIf="isPortuguese" class="portuguese" type="button" (click)="openFixedRoundsModal()">
                  Definir tempos de retenção
                </button>
              </div>
              <div class="center-container">
                <button #startBtnKB class="ballButton">
                  <div #KBball class="ball">
                      <span #KBballText></span>
                      <img src="assets/images/3dBall.png" alt="3D Ball">
                    </div>
                </button>
              </div>   
              <div class="timer-controls">
                  <!--  Information about interval  -->
                  <button type="button" class="stopBtn" id="KBReset" #KBReset><div class="english">Reset</div><div class="portuguese">Resetar</div></button>
                  <button type="button" class="saveBtn" id="KBSave" #KBSave><div class="english">Save</div><div class="portuguese">Salvar</div></button>
                  <form method="post" id="KBForm">
                      <div class="roundbox">
                          <div>Rounds:</div><div #roundsDoneKB>0</div>
                          <div class="english">Total time:</div><div class="portuguese">Tempo Total:</div><div #timerDisplayKB>00 : 00</div>
                      </div>
                  </form>
                  <div #KBResults></div>
              </div>
          </div>
      </div>
      <div #KBResultSaved class="resultSaved hiddenElements"><div class="english">Result Succesfully Saved</div><div class="portuguese">Resultado salvo com sucesso</div></div>
    </div>
  </div>
  <!-- Modal for fixed round durations -->
  <div id="fixedRoundsModalKB" class="modal" #fixedRoundsModalKB>
    <div class="modal-content fixedRoundsModal">
      <span class="close" (click)="closeFixedRoundsModal()">&times;</span>
      <h3 class="english" *ngIf="!isPortuguese">Set time of holds</h3>
      <p class="english" *ngIf="!isPortuguese">Leave 0 if you don't want to set time</p>
      <h3 class="portuguese" *ngIf="isPortuguese">Definir tempo de retencoes</h3>
      <p class="portuguese" *ngIf="isPortuguese">Deixe 0 se não quiser definir os tempos</p>

      <div *ngFor="let round of fixedRoundDurations; let i = index" class="round-input">
        <label class="round-label english" *ngIf="!isPortuguese">Hold {{ i + 1 }}</label>
        <label class="round-label portuguese" *ngIf="isPortuguese">Retenção {{ i + 1 }}</label>
        <div class="time-inputs">
          <input type="number" inputmode="numeric"
                min="0"
                [(ngModel)]="fixedRoundDurations[i].minutes"
                placeholder="min" onblur="this.value = Math.max(0, Math.min(20, this.value))"/>
          <span>min :</span>
          <input type="number" inputmode="numeric"
                min="0"
                max="59"
                [(ngModel)]="fixedRoundDurations[i].seconds"
                placeholder="sec" onblur="this.value = Math.max(0, Math.min(59, this.value))"/>
          <span class="english" *ngIf="!isPortuguese">sec</span>
          <span class="portuguese" *ngIf="isPortuguese">seg</span>
        </div>
      </div>
    </div>
  </div>
  <div id="myModalKB" class="modal" #myModalKB>
    <div class="modal-content">
        <span class="close" id="closeModalKB" #closeModalKB>&times;</span>
        <div class="autoPlayBtnContainer">
          <!--<button type="button" class="autoPlayBtn" (click)="toggleInstructions()">
            {{ instructionsActive ? '⏹ Stop Instructions' : '▶ Play Instructions' }}
          </button>-->
        </div>
        <div class="slideshow-container">
          <div class="mySlides fadeModal slides">
              <img src="assets/images/yogiclines.svg">
              <div class="text english">
                <p>Kapalabhati is a yogic breathing technique that involves rapid and forceful exhalations followed by passive inhalations</p>
              </div>
              <div class="text portuguese">
                <p>Kapalabhati é uma técnica de Respiração Yogi que envolve exalações rápidas e vigorosas seguidas por inalações passivas</p>
              </div>
            </div>
            <div class="mySlides fadeModal slides">
              <img src="assets/images/yogiclines.svg">
              <div class="text english">
                <p>It's important to note that kapalabhati should be practiced on an empty stomach and should be avoided by those with high blood pressure, heart disease, or any other medical conditions</p>
              </div>
              <div class="text portuguese">
                <p>É importante notar que o kapalabhati deve ser praticado com o estômago vazio e deve ser evitado por aqueles com pressão alta, doenças cardíacas ou quaisquer outras condições médicas</p>
              </div>
            </div>
            <div class="mySlides fadeModal slides">
              <img src="assets/images/yogiclines.svg">
              <div class="text english">
                <p>The rapid and forceful exhalations in Kapalabhati help to stimulate the sympathetic nervous system, which can increase energy and vitality</p>
              </div>
              <div class="text portuguese">
                <p>As exalações rápidas e vigorosas no Kapalabhati ajudam a estimular o sistema nervoso simpático, o que pode aumentar a energia e vitalidade</p>
              </div>
            </div>
            <div class="mySlides fadeModal slides">
              <img src="assets/images/breaths.png">
              <div class="text english">
                <p>
                  In settings, choose the number of breaths to prepare for the breath hold
                </p>
              </div>
              <div class="text portuguese">
                <p>
                  Em conifigurações, escolha o número de respirações para preparar a retenção de respiração
                </p>
              </div>
            </div>
            <div class="mySlides fadeModal slides">
              <img src="assets/images/nor.png">
              <div class="text english">
                <p>
                  In settings, choose the speed of breaths to prepare for the breath hold
                </p>
              </div>
              <div class="text portuguese">
                <p>
                  Em conifigurações, escolha a velocidade de respirações para preparar a retenção de respiração
                </p>
              </div>
            </div>
            <div class="mySlides fadeModal slides">
                <img src="assets/images/breathlight.svg">
                <div class="text english">
                  <p>
                    Take a deep breath in through your nose, exhale forcefully through your nose while simultaneously contracting your abdominal muscles to push the air out in short bursts
                  </p>
                </div>
                <div class="text portuguese">
                  <p>
                    Inspire profundamente pelo nariz, espire vigorosamente pelo nariz enquanto contrai simultaneamente os músculos abdominais para empurrar o ar para fora em rajadas curtas
                  </p>
                </div>
            </div>
            <div class="mySlides fadeModal slides">
                <img src="assets/images/airhunger.svg">
                <div class="text english">
                  <p>
                    Relax your abdominal muscles and passively inhale through your nose. Repeat it for several rounds, gradually increasing the force of your exhalations                  
                 </p>
                </div>
                <div class="text portuguese">
                  <p>
                    Relaxe os músculos abdominais e inale passivamente pelo nariz. Repita isso por várias rodadas, aumentando gradualmente a força de suas exalações
                  </p>
                </div>
            </div>
            <div class="mySlides fadeModal slides">
                <img src="assets/images/hold.png">
                <div class="text english">
                  <p>
                    After many breaths, take a deep breath in and hold your breath for as long as you can
                 </p>
                </div>
                <div class="text portuguese">
                  <p>
                    Após várias respirações, inspire profundamente e segure a respiração pelo maior tempo que puder
                  </p>
                </div>
            </div>
            <div class="mySlides fadeModal slides">
                <img src="assets/images/nor.png">
                <div class="text english">
                  <p>
                    Once you cannot hold it any longer, press the circle and get back to your normal breathing for 30 seconds in the recovery round.Do as many rounds as you like 
                 </p>
                </div>
                <div class="text portuguese">
                  <p>
                    Uma vez que não puder mais segurar, pressione o circulo novamente e volte à respiração normal por 30 segundos na rodada de recuperação. Faça tantas rodadas quanto desejar
                  </p>
                </div>
            </div>
            <div class="mySlides fadeModal slides">
                <img src="assets/images/mindful.svg">
                <div class="text english">
                  <p>
                    During the breath hold, try to stay calm and focus on your heart beat.                       
                    Do not do this technique inside the water or any place that may be dangerous if you lose your consciousness
                  </p>
                </div>
                <div class="text portuguese">
                  <p>
                    Durante a retenção de respiração, tente permanecer calmo e focado no seu batimento cardíaco.                       
                    Não faça esta técnica dentro da água ou em qualquer lugar que possa ser perigoso se você perder a consciência
                  </p>
                </div>
            </div>
            <div class="dots" #KBdots role="tablist" aria-label="Slideshow pagination"></div>
        </div>
      </div>
  </div>
</ion-content>